// === INTERPRETACIÃ“N FUNCIONAL NUTRIMARVIN ===
// Este motor detecta el patrÃ³n dominante a partir de las respuestas

function interpretarPatron(respuestas) {
  // Definimos rangos de influencia de cada grupo funcional
  let scoreMetabolico = 0;
  let scoreDigestivo = 0;
  let scoreEstres = 0;

  respuestas.forEach((r, i) => {
    if (i < 5) scoreMetabolico += r.valor;      // preguntas 1â€“5
    else if (i < 10) scoreDigestivo += r.valor; // preguntas 6â€“10
    else scoreEstres += r.valor;                // preguntas 11â€“15
  });

  const maxScore = Math.max(scoreMetabolico, scoreDigestivo, scoreEstres);
  let patron = "";
  let descripcion = "";
  let recomendaciones = [];

  if (maxScore === scoreMetabolico) {
    patron = "ðŸ©¸ PatrÃ³n MetabÃ³lico";
    descripcion = "Tu cuerpo muestra seÃ±ales de energÃ­a irregular o picos de glucosa. Este patrÃ³n se asocia con cansancio postcomida, antojos o dificultad para mantener el peso.";
    recomendaciones = [
      "Desayuna con proteÃ­na y fibra para evitar picos de azÃºcar.",
      "Evita comer distraÃ­do o en estrÃ©s.",
      "Camina 10 minutos despuÃ©s de las comidas para mejorar sensibilidad a la insulina."
    ];
  } else if (maxScore === scoreDigestivo) {
    patron = "ðŸ’© PatrÃ³n Digestivo";
    descripcion = "Tu cuerpo muestra seÃ±ales de digestiÃ³n lenta o eliminaciÃ³n irregular. Este patrÃ³n suele reflejar sobrecarga intestinal o dificultad para eliminar toxinas.";
    recomendaciones = [
      "Prioriza comidas ricas en vegetales y agua tibia en ayunas.",
      "Evita comer con prisa; mastica conscientemente.",
      "Usa hierbas amargas o tÃ© digestivo despuÃ©s de comer."
    ];
  } else {
    patron = "ðŸŒ™ PatrÃ³n de EstrÃ©s y SueÃ±o";
    descripcion = "Tu cuerpo muestra seÃ±ales de estrÃ©s sostenido o sueÃ±o superficial. Este patrÃ³n impacta directamente la regulaciÃ³n hormonal y la glucosa.";
    recomendaciones = [
      "Evita pantallas 1 hora antes de dormir.",
      "Realiza 3 respiraciones profundas al despertar y antes de dormir.",
      "Incluye fuentes de magnesio o alimentos ricos en triptÃ³fano."
    ];
  }

  return { patron, descripcion, recomendaciones };
}

// === RENDERIZAR RESULTADOS ===
function mostrarResultados(respuestas) {
  const resultado = interpretarPatron(respuestas);
  document.getElementById("tituloPatron").textContent = resultado.patron;
  document.getElementById("descripcionPatron").textContent = resultado.descripcion;

  const lista = document.getElementById("recomendaciones");
  lista.innerHTML = "";
  resultado.recomendaciones.forEach(rec => {
    const li = document.createElement("li");
    li.textContent = rec;
    lista.appendChild(li);
  });
}